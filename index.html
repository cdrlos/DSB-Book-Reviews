<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Samal Abdikerimova, Ravi Donepudi, Carlos Salinas, and Xiran Yu" />


<title>Book review statistics</title>

<script src="index_files/header-attrs-2.1/header-attrs.js"></script>
<script src="index_files/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="index_files/bootstrap-3.3.5/css/cerulean.min.css" rel="stylesheet" />
<script src="index_files/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="index_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="index_files/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="index_files/navigation-1.1/tabsets.js"></script>
<link href="index_files/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="index_files/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Book review statistics</h1>
<h4 class="author">Samal Abdikerimova, Ravi Donepudi, Carlos Salinas, and Xiran Yu</h4>

</div>


<div id="book-review-statistics" class="section level1">
<h1>Book review statistics</h1>
<div id="ideas" class="section level2">
<h2>Ideas</h2>
<ol style="list-style-type: decimal">
<li>Look at relationship between reviews and pages.</li>
<li>Filter by language.</li>
<li>Relationship between popularity and gender.</li>
<li>Language and popularity.</li>
<li>Genre popularity through the years.</li>
<li>Publisher relationship with rating.</li>
<li>Publisher and gender relationship.</li>
</ol>
<p>Note that there is an Goodreads API and that somebody has written an R interface to it, however we do not have enough time to explore it and get it to do as we want. What we will do instead is use the data set found on Kaggle <a href="https://www.kaggle.com/jealousleopard/goodreadsbooks/">here</a>together with the Goodreads API to answer some of the questions above.</p>
<p>First we import the data and take a good look.</p>
<pre class="r"><code>books &lt;- read_csv(&quot;data/books.csv&quot;) %&gt;%
    rename(rating = average_rating,
           total_ratings = ratings_count,
           lang = language_code,
           pages = num_pages)
books</code></pre>
<pre><code>## # A tibble: 8,472 x 12
##    bookID title authors rating isbn  isbn13 lang  pages total_ratings
##     &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt; &lt;dbl&gt;         &lt;dbl&gt;
##  1      1 &quot;Har… J.K. R…   4.57 0439… 97804… eng     652       2095690
##  2      2 &quot;Har… J.K. R…   4.49 0439… 97804… eng     870       2153167
##  3      4 &quot;Har… J.K. R…   4.42 0439… 97804… eng     352          6333
##  4      5 &quot;Har… J.K. R…   4.56 0439… 97804… eng     435       2339585
##  5      8 &quot;Har… J.K. R…   4.78 0439… 97804… eng    2690         41428
##  6      9 &quot;Una… W. Fre…   3.74 0976… 97809… en-US   152            19
##  7     10 &quot;Har… J.K. R…   4.73 0439… 97804… eng    3342         28242
##  8     12 &quot;The… Dougla…   4.38 0517… 97805… eng     815          3628
##  9     13 &quot;The… Dougla…   4.38 0345… 97803… eng     815        249558
## 10     14 &quot;The… Dougla…   4.22 1400… 97814… eng     215          4930
## # … with 8,462 more rows, and 3 more variables: text_reviews_count &lt;dbl&gt;,
## #   publication_date &lt;chr&gt;, publisher &lt;chr&gt;</code></pre>
<p>Let’s get more of an idea of what we are working with. Perhaps the easiest way to group books by is language.</p>
<pre class="r"><code>books %&gt;%
    group_by(lang) %&gt;%
    tally() %&gt;%
    arrange(desc(n))</code></pre>
<pre><code>## # A tibble: 25 x 2
##    lang      n
##    &lt;chr&gt; &lt;int&gt;
##  1 eng    6815
##  2 en-US  1040
##  3 en-GB   159
##  4 spa     156
##  5 fre     113
##  6 ger      73
##  7 jpn      46
##  8 mul      19
##  9 zho      13
## 10 grc      11
## # … with 15 more rows</code></pre>
<p>OK, so it looks like US and Great Britain version of books fall under a different language tag (and if we search hard Canadian too). For our purposes <code>"en-CA", ``"en-GB"</code>, and <code>en-US</code> are the same so let us clean up the data a little</p>
<pre class="r"><code>books$lang &lt;- books %&gt;%
    pull(lang) %&gt;%
    str_replace_all(&quot;en*(g|-GB|-US|-CA)&quot;, &quot;eng&quot;)</code></pre>
<p>Another way to deal with this problem is simply to ignore these variants by filtering them out of the data set. Now, since the overwhelming majority of the books in this data set are in English, we will focus our attention on <code>"eng"</code>.</p>
<pre class="r"><code>eng_books &lt;- books %&gt;% filter(lang == &quot;eng&quot;) %&gt;% filter(rating &gt;= 3)</code></pre>
<p>One thing we might one to look at first is the distribution of ratings for English books. We do this as follows</p>
<pre class="r"><code>eng_books %&gt;%
    group_by(rating) %&gt;%
    summarize(total_books = n()) %&gt;%
    ungroup() %&gt;%
    ggplot(aes(x = rating)) +
    geom_bar(aes(y = total_books/1.000001, fill = rating),
             stat = &quot;identity&quot;) +
    labs(title = &quot;Total number of books per rating&quot;,
         x = &quot;average rating&quot;,
         y = &quot;number of books&quot;)</code></pre>
<p><img src="index_files/figure-html/plot%20ratings-1.png" width="672" /></p>
<p>OK, so it seems that most English language ratings are around 4.0, to be precise the mode is and the <code>r eng_books %&gt;%     group_by(rating) %&gt;%     summarize(count = n()) %&gt;%     arrange(desc(count)) %&gt;%     pull(rating) %&gt;%     first()</code> and the average 3.9549246</p>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
